Title: C++指针和引用的那点事儿

Date: 2011-06-12 22:51:44

URL: /2011/06/12/c%e6%8c%87%e9%92%88%e5%92%8c%e5%bc%95%e7%94%a8%e7%9a%84%e9%82%a3%e7%82%b9%e4%ba%8b%e5%84%bf/

1\. 所有的C++大神都建议你，能用引用的时候别用指针。

2. 与指针相比，引用是个良家妇女，她们严格遵守三从四德，必须被指腹为婚（声明的时候必须定义），并且绝对从一而终（引用不能被重新赋值）。引用指腹为婚之后，就不用像指针一样，使用前判断一下是否为null。已经嫁人且不会改嫁的引用与可以随便嫁来嫁的指针相比，自然安全了许多。

3. 从功能上来说，引用和*const类似，她们都指腹为婚从一而终。

4. 如果你需要指向为空，或者要改嫁（改变指向的对象），那就必须要用指针了。除了这两种情况，你还是听大神的话，用引用吧。

5. 操作符重载时，特别推荐返回引用类型而不是指针类型。

6. 从效率上来说，引用和指针是一样的。

7. 引用和指针一样，也可以多态。下次用到多态的时候，别抱着指针不放了。

8. 当函数只需要参数的值而不改变参数时：

   ·function(class a)这是最弱的写法，a的值会被复制一遍再传入function，既浪费时间又浪费空间，效率非常低；

   ·function(class &amp;a)，function(class *a)，这是效率比较高的写法，引用只会传入参数的一个别名，而指针只会传入参数的地址，他们的内存开销都很小，在效率上是一样的。

   ·function(const class &amp;a)，function(const class *const a)，这是最优的写法。这种写法既保证了效率，又保证了参数不会被修改。不过带两个const的指针看着不晕么？所以还是用引用吧。