Title: 为什么C++需要头文件？

Date: 2011-05-14 23:34:11

URL: /2011/05/14/%e4%b8%ba%e4%bb%80%e4%b9%88c%e9%9c%80%e8%a6%81%e5%a4%b4%e6%96%87%e4%bb%b6%ef%bc%9f/

Tags: C++ , 头文件

在C++ primer里看到一段关于变量和函数声明的文字，突然就联想到一些头文件存在的原因，再加上google到的一些内容，总结归纳如下。

大家写代码的时候都知道。变量和函数在使用之前若未定义，一定要先声明。如果所有的变量和函数都在需要使用的时候临时声明，会让代码结构变得凌乱和没有逻辑性。头文件统一了所有的声明，在源文件的开头被包含，能保证源文件中使用的所有变量和函数都事先被声明。另外，使用头文件也能很方便地调用其他文件或类中的函数，只要包含调用类的头文件，就能保证函数已声明。

C++头文件的机制也和C++的编译方式有关。C++中的每个源代码是单独分别编译的。每个源文件编译时都不知道其他文件中的定义。java之所以没有头文件，是因为它在编译时会出产生.class的中间文件，.class文件中就已包含了类名、属性、方法等接口，既然java已经自动生成好了，开发人员也就不必费心再些头文件了。

C++的头文件，也便于程序的封装。例如生成好的dll，对于调用它的开发人员来说，头文件中的信息就已足够，即保护了源代码，也体现了良好的封装性。

刚刚接触C++时，对头文件这个东西非常不理解。但是现在，在读代码的时候，却都会下意识地先看头文件，这样能减少干扰，更清晰而目的明确地分析出整体结构。我想即使以后C++如java一般，不需要头文件，能够在编译时自动生成形如.class的文件，我也会很不习惯的吧。